[TOC]
# 第七章：数据库系统概论  
## 1. 基本概念  
### 数据  
数据是数据库中储存的基本对象  
数据的的定义：描述事物的符号记录（信息是经过处理的对自己有用的数据）  
数据的种类：文字、图形、图像、声音  
数据的特点：数据与语义不可分割（eg:70，没有什么意义，但是建国70周年就有意义了）  
### 数据库  
数据库的定义：数据库(Database,简称DB)是长期储存在计算机内、有组织的、可共享的大量数据的集合。  
数据库的基本特征：数据按一定的数据模型组织、描述和储存；可为各种用户共享；冗余度较小；数据独立性较高；易扩展  
### 数据库管理系统DBMS  
定义：位于用户与操作系统之间的一层数据管理软件，是基础软件，是一个大型复杂的软件系统 。  
主要功能：数据定义、数据操作、数据库运行管理、数据组织储存与管理、数据库保护、数据库维护  
### 数据库系统  
定义：在计算机系统中引入数据库后的系统，是由数据库、数据库管理系统应用程序和数据库管理员组成的存储、管理、处理和维护数据的系统。  
数据库系统的构成：硬件平台及数据库、软件、人员  
### 域  
定义：域是一组具有相同数据类型的值的集合  
### 关系  
候选码：若关系中的某一属性组的值能唯一地表示一个元组，而其子集不能，则称该属性组为候选码  
主码： 若一个关系有多个候选码，则选定其中一个为主码（主码一定是候选码，候选码不一定是主码）  
主属性：候选码的诸属性称为主属性  
非主属性：不包含在任何候选码中的属性称为非主属性  
全码：在最极端的情况下，关系模式的所有属性是这个关系模式的候选码  
### 关系分类  
基本关系（基本表或基表）：实际存在的表，是实际存储数据的逻辑表示  
查询表：查询结果对应的表  
视图表：由基本表或其他视图表导出的表，是虚表，不对应实际存储的数据  
### 关系术语  
表=关系、元组=行、属性=列  
### 关系模式  
关系模式是对关系的描述，是静态的、稳定的
关系是关系模式在某一时刻的状态或内容，是动态的、随时间不断变化的
关系模式和关系往往统称为关系，通过上下文加以区别
![关系模式和关系](F:\Tencent\QQ\2.png)  
### 基本关系操作  
1. 查询：选择、投影、连接、除、并、交、差  
2. 数据更新：插入、删除、修改  
3. 查询的表达能力是其中最主要的部分  
### 关系完整性  
实体完整性：主属性非空（隐含主属性唯一，不能重复）  
参照完整性：Cpno的选择  
用户自定义的完整性  
## 2. 关系数据理论  

## 3. 数据库设计（瀑布模型）  
数据库设计概述
需求分析
概念结构设计
逻辑结构设计
数据库的物理设计
数据库实施和维护

## 4. 关系数据库标准语言SQL  
### 1.数据定义  
#### 数据库的创建与删除  
##### 1. 语法：  
```SQL
CREATE DATABASE <database_name>
```
eg:`CREATE DATABASE  student`  
##### 2. 使用数据库：  
```SQL
use <database_name>
```
##### 3. 删除数据库（不能删除当前数据库）：  
```SQL
drop  database  <database_name>
```
eg:`drop  database  student`  
#### 基本表的创建与删除  
##### 1. 定义基本表：  
CREATE TABLE  <表名>
  (<列名> <数据类型>  [ <列级完整性约束条件> ]
  [，<列名> <数据类型> [ <列级完整性约束条件>] ] …
  [，<表级完整性约束条件> ] ）;
DROP  TABLE <表名>； 

[例1]  建立“学生”表Student，学号是主码，姓名取值唯一:  

```SQL
CREATE TABLE Student          
   (Sno   CHAR(9) PRIMARY KEY, /*主键 列级完整性约束条件*/
    Sname  VARCHAR(20) UNIQUE，    /* Sname取唯一值*/ 
    Ssex    CHAR(2)， 
    Sage   SMALLINT， 
    Sdept  CHAR(20) 
   )； 
```
[例2] 建立一个“课程”表Course:  
```SQL
CREATE TABLE  Course 
   ( Cno       CHAR(4) PRIMARY KEY， 
     Cname  CHAR(40)，            
     Cpno     CHAR(4) ，     /*先修课*/                               
     Ccredit  SMALLINT， 
     FOREIGN KEY (Cpno) REFERENCES Course(Cno)   /*Cpno是外码，被参照表是Course ，被参照列是Cno*/
   );
```
[例3]  建立一个“学生选课”表SC，它由学号Sno、课程号Cno，修课成绩Grade组成，其中(Sno, Cno)为主码。   
```SQL
CREATE TABLE  SC 
  (Sno  CHAR(9)，       
   Cno  CHAR(4)，  
   Grade    SMALLINT， 
   PRIMARY KEY (Sno，Cno)， 
   FOREIGN KEY (Sno) REFERENCES Student(Sno)，
   FOREIGN KEY (Cno) REFERENCES Course(Cno)
  ); 
```
#### 基本表的修改：  
ALTER TABLE <表名>（先选中表格才能进行接下来的操作） （<表名>：要修改的基本表）  
[ ADD [COLUMN]***（SQL中不加column）***<新列名> <数据类型> [ 完整性约束 ] ]  
[ ADD <表级完整性约束>]（上边两个ADD子句：增加新列和新的完整性约束条件）  
[ DROP  [COLUMN]<列名>[CASCADE|RESTRICT] ]  
[ DROP  CONSTRAINT<完整性约束名[CASCADE|RESTRICT] ]（以上两个DROP子句：删除指定的完整性约束条件）  
[ ALTER COLUMN <列名> <数据类型> ]（ALTER COLUMN子句：用于修改列名和数据类型）  
[例4]   向Student表增加“入学时间S”列，其数据类型为日期型。   
`ALTER TABLE Student ADD S_entrance DATE`(不论基本表中原来是否已有数据，新增加的列一律为空值)  
#### 索引：  
##### 语句格式  
CREATE [UNIQUE] [CLUSTER] INDEX <索引名> ON 
<表名>(<列名>[<次序>][,<列名>[<次序>] ]…)；  
##### DROP  INDEX  <索引名>  
删除索引时，系统会从数据字典中删去有关该索引的描述  
例: 删除Student表的Stusname索引。  
`DROP  INDEX  Student.Stusname`  
### 2.数据更新  
#### 数据的插入  
##### 插入元组  
语句格式：  
`INSERT     
INTO <表名>[<属性1>],[<属性2>...]  
VALUES(<常量1>,<常量2>)`  
功能：将新的元组插入到指定表  
##### 插入子查询结果  
语句格式：  
`INSERT  
INTO <表名>[(<属性1>,<属性2>...)]  
子查询`  
功能：将子查询的结果插入指定表中  
注意：子查询的结果必须包含和insert的字段列表一样多的字段，并且数据类型兼容  
#### 数据的修改  
##### 修改某元组的值  
##### 修改多个元组的值  
##### 带子查询的修改语句  
#### 数据的删除  










***关系操作的特点***  
集合操作方式：操作的对象和结果都是集合，一次一集合的方式  







